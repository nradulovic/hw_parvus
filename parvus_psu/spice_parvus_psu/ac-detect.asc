Version 4
SHEET 1 6124 2336
WIRE 2176 -1536 2144 -1536
WIRE 2288 -1536 2256 -1536
WIRE 2944 -1536 2368 -1536
WIRE 2176 -1344 2144 -1344
WIRE 2288 -1344 2256 -1344
WIRE 2656 -1344 2368 -1344
WIRE 2176 -1056 2144 -1056
WIRE 2288 -1056 2256 -1056
WIRE 2656 -1056 2656 -1264
WIRE 2656 -1056 2368 -1056
WIRE -256 -960 -448 -960
WIRE -160 -960 -160 -1072
WIRE 32 -960 -160 -960
WIRE 416 -960 32 -960
WIRE 512 -960 416 -960
WIRE 608 -960 512 -960
WIRE -160 -944 -160 -960
WIRE 32 -944 32 -960
WIRE 416 -944 416 -960
WIRE 512 -944 512 -960
WIRE -352 -864 -448 -864
WIRE 336 -864 320 -864
WIRE 416 -864 400 -864
WIRE 2176 -864 2144 -864
WIRE 2288 -864 2256 -864
WIRE 2560 -864 2368 -864
WIRE 2656 -864 2656 -976
WIRE 2656 -864 2640 -864
WIRE 2672 -864 2656 -864
WIRE 2944 -864 2944 -1536
WIRE 2944 -864 2752 -864
WIRE -352 -848 -352 -864
WIRE -256 -848 -256 -960
WIRE 320 -816 320 -864
WIRE 608 -816 608 -960
WIRE -352 -768 -352 -784
WIRE -256 -768 -256 -784
WIRE -256 -768 -352 -768
WIRE 32 -768 32 -864
WIRE 128 -768 32 -768
WIRE 256 -768 128 -768
WIRE 512 -768 512 -864
WIRE 544 -768 512 -768
WIRE 32 -720 32 -768
WIRE 512 -672 512 -768
WIRE 528 -672 512 -672
WIRE 608 -672 608 -720
WIRE 608 -672 592 -672
WIRE 800 -672 608 -672
WIRE 896 -672 800 -672
WIRE 1184 -672 1088 -672
WIRE 1536 -672 1184 -672
WIRE 1632 -672 1616 -672
WIRE 1664 -672 1632 -672
WIRE 800 -656 800 -672
WIRE 32 -624 32 -640
WIRE 512 -624 512 -672
WIRE -160 -576 -160 -864
WIRE -64 -576 -160 -576
WIRE -32 -576 -64 -576
WIRE 320 -576 320 -720
WIRE 448 -576 320 -576
WIRE 1184 -576 1184 -672
WIRE 1200 -576 1184 -576
WIRE 1296 -576 1280 -576
WIRE 1440 -576 1376 -576
WIRE 1472 -576 1440 -576
WIRE 2368 -576 2368 -864
WIRE 2576 -576 2368 -576
WIRE 2656 -576 2656 -864
WIRE 2656 -576 2640 -576
WIRE 2672 -576 2656 -576
WIRE 2944 -576 2944 -864
WIRE 2944 -576 2736 -576
WIRE -352 -560 -352 -768
WIRE -160 -528 -160 -576
WIRE -224 -480 -352 -480
WIRE 320 -480 320 -576
WIRE 416 -480 416 -864
WIRE 1280 -480 1280 -576
WIRE 1296 -480 1280 -480
WIRE 1440 -480 1440 -576
WIRE 1440 -480 1360 -480
WIRE -64 -464 -64 -576
WIRE 128 -464 128 -768
WIRE 800 -464 800 -576
WIRE 1440 -464 1440 -480
WIRE 1632 -464 1632 -672
WIRE -352 -384 -352 -400
WIRE -352 -384 -448 -384
WIRE -160 -384 -160 -432
WIRE -160 -384 -352 -384
WIRE -64 -384 -64 -400
WIRE -64 -384 -160 -384
WIRE 32 -384 32 -528
WIRE 32 -384 -64 -384
WIRE 128 -384 128 -400
WIRE 128 -384 32 -384
WIRE 320 -384 320 -400
WIRE 320 -384 128 -384
WIRE 416 -384 416 -400
WIRE 416 -384 320 -384
WIRE 512 -384 512 -528
WIRE 512 -384 416 -384
WIRE 800 -384 800 -400
WIRE 800 -384 512 -384
WIRE 1440 -384 1440 -400
WIRE 1632 -384 1632 -400
WIRE 2368 -384 2368 -576
WIRE 2560 -384 2368 -384
WIRE 2944 -384 2944 -576
WIRE 2944 -384 2752 -384
WIRE 2368 -368 2368 -384
WIRE 2560 -368 2560 -384
WIRE 2752 -368 2752 -384
WIRE 2944 -368 2944 -384
WIRE -352 -352 -352 -384
WIRE 2368 -192 2368 -304
WIRE 2944 -192 2944 -304
WIRE 2944 -192 2368 -192
WIRE 2560 -96 2560 -304
WIRE 2752 -96 2752 -304
WIRE 2752 -96 2560 -96
WIRE 2944 -96 2752 -96
WIRE 2368 -16 2368 -192
WIRE 2384 -16 2368 -16
WIRE 2576 -16 2464 -16
WIRE 2656 -16 2656 -576
WIRE 2656 -16 2640 -16
WIRE 2672 -16 2656 -16
WIRE 2848 -16 2736 -16
WIRE 2944 -16 2944 -96
WIRE 2944 -16 2928 -16
WIRE 2368 16 2368 -16
WIRE 2944 16 2944 -16
WIRE 1056 64 1056 0
WIRE 2560 96 2368 96
WIRE 2656 96 2656 -16
WIRE 2656 96 2640 96
WIRE 2672 96 2656 96
WIRE 2944 96 2752 96
WIRE 1056 192 1056 144
WIRE 2368 192 2368 96
WIRE 2368 192 2272 192
WIRE 2416 192 2368 192
WIRE 2560 192 2496 192
WIRE 2656 192 2656 96
WIRE 2656 192 2640 192
WIRE 2672 192 2656 192
WIRE 2848 192 2752 192
WIRE 2944 192 2944 96
WIRE 2944 192 2928 192
WIRE 3040 192 2944 192
FLAG 2144 -1536 vcc
IOPIN 2144 -1536 Out
FLAG 2144 -864 vee
IOPIN 2144 -864 Out
FLAG 2144 -1344 gspk
IOPIN 2144 -1344 Out
FLAG 2144 -1056 pwrgnd
IOPIN 2144 -1056 Out
FLAG -448 -384 pwrgnd
IOPIN -448 -384 Out
FLAG -352 -352 0
FLAG 3040 192 acs_p
FLAG 2272 192 acs_n
FLAG -448 -960 acs_p
FLAG -448 -864 acs_n
FLAG 1056 192 0
FLAG 1056 0 vsw
FLAG 2432 240 0
FLAG 2480 240 vsw
FLAG 2864 240 0
FLAG 2912 240 vsw
FLAG -160 -1072 vcc
FLAG 896 -672 out
FLAG 1088 -672 out
FLAG 1632 -384 0
FLAG 1664 -672 stby
FLAG 1440 -384 0
FLAG 1472 -576 mute
SYMBOL voltage 2768 192 R90
WINDOW 123 0 0 Left 2
WINDOW 3 -94 177 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser=0
SYMATTR InstName V2
SYMBOL schottky 2736 -304 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -14 -112 Left 2
SYMATTR InstName D6
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 2352 -368 R0
WINDOW 3 -144 95 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D9
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage 2656 192 M270
WINDOW 123 0 0 Left 2
WINDOW 3 -96 -62 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser=0
SYMATTR InstName V3
SYMBOL schottky 2928 -304 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -112 -78 Left 2
SYMATTR InstName D10
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 2544 -368 R0
WINDOW 3 -239 65 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D11
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind2 2160 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVCC
SYMATTR Value {con1_len*7n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2160 -848 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVEE
SYMATTR Value {con1_len*27n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2160 -1328 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LGSPK2
SYMATTR Value {con1_len*17n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 2384 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 25m
SYMBOL res 2384 -1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 25m
SYMBOL res 2384 -1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 15m
SYMBOL res 2384 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 25m
SYMBOL ind 2640 -1072 R0
SYMATTR InstName L4
SYMATTR Value 4n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 2640 -1360 R0
SYMATTR InstName L6
SYMATTR Value 4n
SYMATTR SpiceLine Rser=1m
SYMBOL cap 2672 -32 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C22
SYMATTR Value 470n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 2576 -32 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C23
SYMATTR Value 470n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL res 2656 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R42
SYMATTR Value 10k
SYMBOL res 2768 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R46
SYMATTR Value 10k
SYMBOL res 2480 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R45
SYMATTR Value .47
SYMBOL res 2944 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R50
SYMATTR Value .47
SYMBOL ind2 2160 -1040 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND
SYMATTR Value {con1_len*7n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL polcap 2640 -592 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 10m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.055 Lser=20n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 2736 -592 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 10m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.055 Lser=20n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL diode -368 -848 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -272 -848 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res -368 -576 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res -368 -496 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL npn -224 -528 R0
SYMATTR InstName Q1
SYMATTR Value BC546B
SYMBOL voltage 1056 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 20 200m 1n 1n 800m 1.2 2)
SYMBOL sw 2400 192 R270
SYMATTR InstName S1
SYMBOL sw 2832 192 R270
SYMATTR InstName S2
SYMBOL res 2656 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {rser}
SYMBOL res 2768 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {rser}
SYMBOL res 2960 112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value {rser}
SYMBOL res 2384 112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value {rser}
SYMBOL res -176 -960 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL cap -80 -464 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL npn -32 -624 R0
SYMATTR InstName Q2
SYMATTR Value BC546B
SYMBOL res 16 -960 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL cap 112 -464 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 400 -496 R0
SYMATTR InstName R10
SYMATTR Value 22k
SYMBOL res 400 -960 R0
SYMATTR InstName R11
SYMATTR Value 22k
SYMBOL res 304 -496 R0
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL res 496 -960 R0
SYMATTR InstName R13
SYMATTR Value 22k
SYMBOL res 16 -736 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL diode 400 -880 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 592 -656 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL pnp 256 -720 M180
SYMATTR InstName Q4
SYMATTR Value BC556B
SYMBOL npn 448 -624 R0
SYMATTR InstName Q6
SYMATTR Value BC546B
SYMBOL LED 784 -464 R0
SYMATTR InstName D7
SYMATTR Value NSCW100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 784 -672 R0
SYMATTR InstName R14
SYMATTR Value 5k1
SYMBOL cap 1616 -464 R0
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL res 1632 -688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap 1424 -464 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL res 1296 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 2k
SYMBOL res 1392 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 18k
SYMBOL diode 1360 -496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL npn 544 -816 R0
SYMATTR InstName Q3
SYMATTR Value BC546B
TEXT 144 -1488 Left 2 !.op
TEXT -560 -1344 Left 2 !.option plotwinsize=0
TEXT -560 -1312 Left 2 !.option noopiter
TEXT -560 -1616 Left 2 ;Transient
TEXT -560 -1456 Left 2 !.four {freq} 10 10 v(SPK+,SPK-)
TEXT 144 -1520 Left 2 !.param prb=0
TEXT -560 -1520 Left 2 !.param timestep={1/((65536/8)*freq)}
TEXT -560 -1552 Left 2 !.param freq=50
TEXT -560 -1488 Left 2 !.param stoptime {iterations/freq}
TEXT 144 -1584 Left 2 ;.ac oct 100 10 100meg
TEXT 144 -1552 Left 2 ;.step param prb list -1 1
TEXT 144 -1616 Left 2 ;AC analysis
TEXT -560 -1424 Left 2 !.param iterations=80
TEXT 152 -1280 Left 2 !.param Zimp=4
TEXT 152 -1248 Left 2 !.param supplyPWR=40
TEXT 152 -1216 Left 2 !.param supplyVLT=18
TEXT 152 -1312 Left 2 !.param voutput={10*sqrt(2)}
TEXT 152 -1184 Left 2 !.param supplyK 0.06
TEXT 2064 304 Left 2 !.param rser {(supplyVLT*supplyVLT*supplyK)/(2*supplyPWR)}
TEXT -560 -1584 Left 2 !.tran 0 {stoptime} 100n {timestep}
TEXT 2064 336 Left 2 !.param phi=90
TEXT 504 -1312 Left 2 !.param con1_len=5
TEXT 504 -1280 Left 2 !.param con2_len 10
TEXT 2032 -1616 Left 2 ;Konektor napajanja, star ground i napajanje
TEXT 152 -1344 Left 2 ;Ulazni parametri kola
TEXT -560 -1248 Left 2 !.lib ../spice_root/lib/FCS_D.lib
TEXT 504 -1248 Left 2 !.param BIAS=0.45
TEXT -560 -1280 Left 2 !.param vinput voutput*(nfb1/nfb2)
TEXT 504 -1216 Left 2 !.param nfb1=100
TEXT 504 -1184 Left 2 !.param nfb2=1k5
TEXT 152 -1456 Left 2 ;.step temp 0 60 20
TEXT 2056 448 Left 2 !.model SW SW(Ron=1m Roff=1Meg Vt=18 Vh=1)
RECTANGLE Normal 96 -1632 -576 -1392
RECTANGLE Normal 96 -1152 -576 -1360
RECTANGLE Normal 800 -1632 128 -1392
RECTANGLE Normal 2400 -816 2160 -1584 2
RECTANGLE Normal 800 -1152 128 -1360
RECTANGLE Normal 3264 384 2016 -1632 2
